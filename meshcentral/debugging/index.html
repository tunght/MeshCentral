
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A remote monitoring and management tool">
      
      
        <meta name="author" content="Ylianst">
      
      
        <link rel="canonical" href="https://git.meshcentral.com/meshcentral/debugging/">
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Debugging - MeshCentral Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#websockets-video" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MeshCentral Documentation" class="md-header__button md-logo" aria-label="MeshCentral Documentation" data-md-component="logo">
      
  <img src="../../images/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MeshCentral Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Debugging
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Ylianst/MeshCentral" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Ylianst/MeshCentral
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../install/" class="md-tabs__link">
        Install
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        MeshCentral2
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../design/" class="md-tabs__link">
        Design and Architecture
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../meshcmd/" class="md-tabs__link">
        MeshCmd
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../meshctrl/" class="md-tabs__link">
        MeshCtrl
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../meshrouter/" class="md-tabs__link">
        Mesh Router
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../intelamt/" class="md-tabs__link">
        Intel AMT
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../other/adfs_sso_guide/" class="md-tabs__link">
        Other
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MeshCentral Documentation" class="md-nav__button md-logo" aria-label="MeshCentral Documentation" data-md-component="logo">
      
  <img src="../../images/favicon.ico" alt="logo">

    </a>
    MeshCentral Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Ylianst/MeshCentral" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Ylianst/MeshCentral
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install/install2/" class="md-nav__link">
        Full Install Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          MeshCentral2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MeshCentral2" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          MeshCentral2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        MeshCentral2 Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        All Configuration Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devicetabs/" class="md-nav__link">
        Device Tabs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tokens/" class="md-nav__link">
        Tokens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../assistant/" class="md-nav__link">
        Assistant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../codesigning/" class="md-nav__link">
        Code Signing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Debugging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Debugging
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#websockets-video" class="md-nav__link">
    Websockets Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshcentral-server" class="md-nav__link">
    MeshCentral Server
  </a>
  
    <nav class="md-nav" aria-label="MeshCentral Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-configjs-settings" class="md-nav__link">
    Useful config.js settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-trace-in-your-browser-dev-tools" class="md-nav__link">
    Enabling trace in your browser Dev Tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-it-all" class="md-nav__link">
    Logging it all
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restricting-server-to-specific-ips" class="md-nav__link">
    Restricting server to specific IP(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-system-id-types" class="md-nav__link">
    Finding system ID types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-down-cert-crt-file-from-internet" class="md-nav__link">
    Pull down cert .crt file from internet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshagent" class="md-nav__link">
    MeshAgent
  </a>
  
    <nav class="md-nav" aria-label="MeshAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-debug-logs-to-server" class="md-nav__link">
    Agent Debug Logs to server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determine-agent-capabilities" class="md-nav__link">
    Determine Agent capabilities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-meshagentmsh-flags" class="md-nav__link">
    Useful MeshAgent.msh flags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-generated-msh-file" class="md-nav__link">
    Obtain generated .msh File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meshagent-commands" class="md-nav__link">
    MeshAgent Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-fly-patching-meshagent" class="md-nav__link">
    On the fly Patching MeshAgent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-debugging-using-meshcore-js-debugger" class="md-nav__link">
    Agent Debugging using MeshCore JS Debugger
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Design and Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design and Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Design and Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../design/" class="md-nav__link">
        Design and Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          MeshCmd
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MeshCmd" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          MeshCmd
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meshcmd/" class="md-nav__link">
        MeshCmd
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          MeshCtrl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MeshCtrl" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          MeshCtrl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meshctrl/" class="md-nav__link">
        MeshCtrl
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Mesh Router
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mesh Router" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Mesh Router
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meshrouter/" class="md-nav__link">
        MeshCentral Router
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Intel AMT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Intel AMT" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Intel AMT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../intelamt/" class="md-nav__link">
        Intel AMT
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/adfs_sso_guide/" class="md-nav__link">
        ADFS SSO Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/meshcentral_satellite/" class="md-nav__link">
        MeshCentral Satellite
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#websockets-video" class="md-nav__link">
    Websockets Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshcentral-server" class="md-nav__link">
    MeshCentral Server
  </a>
  
    <nav class="md-nav" aria-label="MeshCentral Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-configjs-settings" class="md-nav__link">
    Useful config.js settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-trace-in-your-browser-dev-tools" class="md-nav__link">
    Enabling trace in your browser Dev Tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-it-all" class="md-nav__link">
    Logging it all
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restricting-server-to-specific-ips" class="md-nav__link">
    Restricting server to specific IP(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-system-id-types" class="md-nav__link">
    Finding system ID types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-down-cert-crt-file-from-internet" class="md-nav__link">
    Pull down cert .crt file from internet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meshagent" class="md-nav__link">
    MeshAgent
  </a>
  
    <nav class="md-nav" aria-label="MeshAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-debug-logs-to-server" class="md-nav__link">
    Agent Debug Logs to server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determine-agent-capabilities" class="md-nav__link">
    Determine Agent capabilities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-meshagentmsh-flags" class="md-nav__link">
    Useful MeshAgent.msh flags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-generated-msh-file" class="md-nav__link">
    Obtain generated .msh File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meshagent-commands" class="md-nav__link">
    MeshAgent Commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-fly-patching-meshagent" class="md-nav__link">
    On the fly Patching MeshAgent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-debugging-using-meshcore-js-debugger" class="md-nav__link">
    Agent Debugging using MeshCore JS Debugger
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Debugging</h1>

<h2 id="websockets-video">Websockets Video<a class="headerlink" href="#websockets-video" title="Permanent link">&para;</a></h2>
<p>Make sure you understand how MeshCentral works with your browser using chrome developer tools.</p>
<div class="video-wrapper">
  <iframe width="320" height="180" src="https://www.youtube.com/embed/3vI4URd3VzU" frameborder="0" allowfullscreen></iframe>
</div>

<h2 id="meshcentral-server">MeshCentral Server<a class="headerlink" href="#meshcentral-server" title="Permanent link">&para;</a></h2>
<h3 id="useful-configjs-settings">Useful config.js settings<a class="headerlink" href="#useful-configjs-settings" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/Ylianst/MeshCentral/blob/master/meshcentral-config-schema.json">https://github.com/Ylianst/MeshCentral/blob/master/meshcentral-config-schema.json</a></p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;AgentsInRAM&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="nt">&quot;AgentUpdateBlockSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span><span class="w"></span>
<span class="nt">&quot;agentUpdateSystem&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="nt">&quot;noAgentUpdate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="nt">&quot;WsCompression&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="nt">&quot;AgentWsCompression&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
</code></pre></div>
<h3 id="enabling-trace-in-your-browser-dev-tools">Enabling trace in your browser Dev Tools<a class="headerlink" href="#enabling-trace-in-your-browser-dev-tools" title="Permanent link">&para;</a></h3>
<p><code>Trace=1</code> as a parameter in chrome dev tools for debugging</p>
<p>To log all database queries, change log_statement in /etc/postgresql/13/main/postgresql.conf</p>
<div class="highlight"><pre><span></span><code># CUSTOM
log_statement = &#39;all&#39;           # none, ddl, mod, all
</code></pre></div>
<p>The stacktrace was logged to <code>stdout/journalctl</code>. Supposedly, you can enable debug logging for node modules by adding <code>DEBUG=&lt;modulename&gt;</code> to the environment. </p>
<p>Adding this to <code>/etc/systemd/system/meshcentral.service</code> should do it but it didn't seem to do anything. </p>
<p>I think that's because Mesh uses the trace logging in the browser instead of logging things in the server logs. </p>
<div class="highlight"><pre><span></span><code>Environment=DEBUG=mesh*
</code></pre></div>
<p>If you want to change node to meshcentral in journalctl, add this to /etc/systemd/system/meshcentral.service.</p>
<div class="highlight"><pre><span></span><code>SyslogIdentifier=meshcentral
</code></pre></div>
<h3 id="logging-it-all">Logging it all<a class="headerlink" href="#logging-it-all" title="Permanent link">&para;</a></h3>
<p>To log everything that's possible, prepare the log directory.</p>
<div class="highlight"><pre><span></span><code>mkdir /meshcentral/meshcentral-logs/
chown tactical:tactical logs
ln -s ../meshcentral-logs/log.txt /meshcentral/meshcentral-data/log.txt
</code></pre></div>
<p>And then add this to your config.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nt">&quot;meshErrorLogPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/meshcentral/meshcentral-logs/&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;authLog&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/meshcentral/meshcentral-logs/auth.log&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;log&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;cookie&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;dispatch&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;main&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;peer&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;web&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;webrequest&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;relay&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;webrelaydata&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;webrelay&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;mps&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;mpscmd&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;swarm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;swarmcmd&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;agentupdate&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;agent&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;cert&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;db&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;email&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;amt&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;httpheaders&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;websocket&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
</code></pre></div>
<p>You'll then have 3 files:</p>
<div class="highlight"><pre><span></span><code>-rw-rw-r-- <span class="m">1</span> tactical tactical   <span class="m">2593</span> Feb  <span class="m">2</span> <span class="m">12</span>:22 auth.log
-rw-r--r-- <span class="m">1</span> tactical tactical <span class="m">147593</span> Feb  <span class="m">2</span> <span class="m">12</span>:31 log.txt
-rw-rw-r-- <span class="m">1</span> tactical tactical    <span class="m">381</span> Feb  <span class="m">2</span> <span class="m">12</span>:02 mesherrors.txt
</code></pre></div>
<p><code>log.txt</code> will now log everything in the Trace tab</p>
<h3 id="restricting-server-to-specific-ips">Restricting server to specific IP(s)<a class="headerlink" href="#restricting-server-to-specific-ips" title="Permanent link">&para;</a></h3>
<p>When doing debugging on my development server, I use this line in the settings section to block all agent connections except the agent I want:</p>
<div class="highlight"><pre><span></span><code>&quot;agentAllowedIp&quot;: [ &quot;192.168.2.147&quot; ],
</code></pre></div>
<p>Of course, this is just for debugging.</p>
<h3 id="finding-system-id-types">Finding system ID types<a class="headerlink" href="#finding-system-id-types" title="Permanent link">&para;</a></h3>
<p><a href="https://serverurl/meshagents">https://serverurl/meshagents</a> aka trying figure out what this is</p>
<p><img alt="ID" src="../images/determine-id.png" /></p>
<h3 id="pull-down-cert-crt-file-from-internet">Pull down cert .crt file from internet<a class="headerlink" href="#pull-down-cert-crt-file-from-internet" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/Ylianst/MeshCentral/issues/1662#issuecomment-666559391">See #1662</a> We have run into this challenge before, where our .crt file expired and then all our agents were unable to connect. In our case, the TLS cert was available on the internet, and thus, we were able to use these commands to update it:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> -n <span class="se">\|</span> openssl s_client -connect yourdomain.com:443 <span class="m">2</span>&gt; /dev/null<span class="se">\|</span> sed -ne <span class="s1">&#39;/-BEGIN   CERTIFICATE-/,/-END CERTIFICATE-/p&#39;</span> &gt; /opt/meshcentral/meshcentral-data/webserver-cert-public.crt
service meshcentral restart
</code></pre></div>
<h2 id="meshagent">MeshAgent<a class="headerlink" href="#meshagent" title="Permanent link">&para;</a></h2>
<h3 id="agent-debug-logs-to-server">Agent Debug Logs to server<a class="headerlink" href="#agent-debug-logs-to-server" title="Permanent link">&para;</a></h3>
<p>This automatically downloads all agent error logs into <code>meshcentral-data/agenterrorlogs.txt</code></p>
<p><a href="https://github.com/Ylianst/MeshCentral/blob/aa58afcc3a5d738177ab7a7b6d0228d72af82b85/meshcentral-config-schema.json#L100">Set</a> in <code>config.json</code></p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;agentLogDump&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
</code></pre></div>
<h3 id="determine-agent-capabilities">Determine Agent capabilities<a class="headerlink" href="#determine-agent-capabilities" title="Permanent link">&para;</a></h3>
<p>On the server goto the agents console tab. Type:</p>
<div class="highlight"><pre><span></span><code>info
</code></pre></div>
<h3 id="useful-meshagentmsh-flags">Useful MeshAgent.msh flags<a class="headerlink" href="#useful-meshagentmsh-flags" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/Ylianst/MeshAgent/blob/master/meshcore/agentcore.h#L190">https://github.com/Ylianst/MeshAgent/blob/master/meshcore/agentcore.h#L190</a></p>
<div class="highlight"><pre><span></span><code><span class="err">co</span><span class="kc">ntr</span><span class="err">olCha</span><span class="kc">nnel</span><span class="err">Debug=</span><span class="mi">1</span><span class="w"></span>
<span class="err">logUpda</span><span class="kc">te</span><span class="err">=</span><span class="mi">1</span><span class="w"></span>
</code></pre></div>
<h3 id="obtain-generated-msh-file">Obtain generated .msh File<a class="headerlink" href="#obtain-generated-msh-file" title="Permanent link">&para;</a></h3>
<p>If you need a trick to get the .msh file, you can add ?debug=1 to the URL and click "Add Agent", there will be an extra link to download it.</p>
<h3 id="meshagent-commands">MeshAgent Commands<a class="headerlink" href="#meshagent-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>MeshAgent run
MeshAgent dbTool.js list
</code></pre></div>
<p>Forcing Core version from Cmdline</p>
<ul>
<li>Download meschore.js and rename to CoreModule.js and put it alongside MeshAgent.exe</li>
<li>Stop MeshAgent service</li>
<li>Run <code>MeshAgent.exe dbTool.js import CoreModule</code></li>
</ul>
<h3 id="on-the-fly-patching-meshagent">On the fly Patching MeshAgent<a class="headerlink" href="#on-the-fly-patching-meshagent" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/Ylianst/MeshAgent/issues/89#issuecomment-949901720">MeshAgent#89 (comment)</a></p>
<p>There are two ways to do this... When debugging, and making changes, you can modify the .js file directly, and just save it in the same folder as the agent binary... The agent will use the .js file from disc if it's there, if it's newer than the one compiled in the binary. You don't even need to restart the agent. You can just clear the core, and reload the core.....</p>
<p>When you are satisfied with your changes to the .js file, you can use the clipboard, in the following fashion:</p>
<div class="highlight"><pre><span></span><code>meshagent -exec <span class="s2">&quot;require(&#39;clipboard&#39;).nativeAddCompressedModule(&#39;foo&#39;);process.exit();&quot;</span>
</code></pre></div>
<p>if the file you modified isn't in the same folder as the agent binary, you can use the following command if you don't want to move the file, and edit it directly in the modules folder:</p>
<div class="highlight"><pre><span></span><code>meshagent -exec <span class="s2">&quot;setModulePath(&#39;pathToFolder&#39;);require(&#39;clipboard&#39;).nativeAddCompressedModule(&#39;foo&#39;);process.exit();&quot;</span>
</code></pre></div>
<p>This command is just like the previous, except it searches for modules in the path specified.</p>
<p>Just substitute foo, with the name of the module that you modified. It will load the module from disc, compress it, and save it into the clipboard.. So you can just load up your editor for ILibDuktape_Polyfills.c, and find where that particular module is defined... and paste directly from the clipboard... The clipboard will contain all the necessary C code to uncompress and load the module.</p>
<p>If the compressed result is relatively long, it will auto break it up into multiple lines to work around an issue with visual studio's maximum string literal limitations.</p>
<h3 id="agent-debugging-using-meshcore-js-debugger">Agent Debugging using MeshCore JS Debugger<a class="headerlink" href="#agent-debugging-using-meshcore-js-debugger" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/Ylianst/MeshAgent/issues/119">(#119)</a> How to test changes to the meshagent and recompile them.</p>
<ul>
<li>Copy duktape-debugger.js to the mesh directory on the target machine.</li>
<li>From the console tab of the agent, enter this command, substituting the port number you want to use instead of 9999
<code>eval "attachDebugger({ webport: 9999 })"</code></li>
</ul>
<p>Then open your browser to http://localhost:9999 or whatever port you used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you pause the debugger, and happen to forget about it, the agent will automatically kill itself and restart because it will think that a thread is stuck. Default debugger timeout is 10 minutes, you may find a log entry saved to disk saying "Microstack Thread STUCK", or something similar.</p>
</div>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../codesigning/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Code Signing" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Code Signing
            </div>
          </div>
        </a>
      
      
        
        <a href="../../design/" class="md-footer__link md-footer__link--next" aria-label="Next: Design and Architecture" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Design and Architecture
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.expand", "navigation.top", "navigation.instant"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>